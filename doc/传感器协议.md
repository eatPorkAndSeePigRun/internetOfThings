## 传感器协议

-----

#### 一、传感器数据格式
传感器数据格式定义如下：
**数据头 + 数据长度 + 命令标识符 + 传感器类别 + 传感器类型 + 传感器名称 +传感器模块地址 + 传感器数据长度 + 数据1 + 数据2 +……+ 数据n + 校验码 + 停止位**


>**数据头**（2字节）：0xA5 0x5A 
**数据长度**（1字节）：命令标识符、传感器类别、……、数据n的字节数相加之和。
**命令标识符**（1字节）：见下表
**传感器类别**（1字节）**传感器类型**（1字节）**传感器名称**（1字节）：即下面编码地址
**传感器模块地址**（1字节）：传感器模块地址的具体数值是0x00～0x07
**数据内容**（m字节）：数据内容用“数据1 +……+ 数据n”表示，代表每个传感器所采集到的具体数据，每种数据分配2字节储存空间，数据内容包括m=2*n字节
**传感器数据长度**（1字节）：即传感器采集数据内容长度为m
**校验位**（1字节）: = （数据长度数值 + 命令标识符数值 + 传感器类别数值 + 传感器类型数值 + 传感器名称数值 + 传感器模块地址数值 + 传感器数据长度 + 数据内容）% 256
**停止位**（1字节）：0xAA

1. 命令标识符

|命令标识符|基板|传感器模块|
|-|-|-|
|0xF1|Read读取命令|发送数据命令|
|0xF2|Test测试命令|接收数据命令|
|0xF3|Test测试确认命令|发送一次数据命令|
|0xF4|查询传感器模块地址|发送传感器地址|

2. 编码地址
编码地址 = 类别编码 + 类型编码 + 名称编码

>例如：震动开关的编码地址为：
震动开关编码地址 = 0x01 + 0x01 + 0x04  = 0x01 0x01 0x04
-----
#### 二、实例：
>* 开关量传感器 0xA5  0x5A  0x08  0xF1  0x01  0x05  0x01  0x01  0x02  0x0001  0x04  0xAA
>* 模拟量传感器 0xA5  0x5A  0x08  0xF1  0x03  0x04  0x01  0x03  0x02  0xFFFF  0x05  0xAA
>* 数字量传感器 0xA5  0x5A  0x0A  0xF1  0x02  0x05  0x01  0x02  0x04  0xFFFF  0xFFFF  0x0B  0xAA

-----
#### 附录：多传感器模块
*数据头 + 数据长度 + 命令标识符 + 节点地址 + 传感器类别1 + 传感器类型1 +  传感器名称1 + 传感器模块地址1 + 传感器数据长度1 + 数据内容1  +  传感器类别2 + 传感器类型2 +  传感器名称2 + 传感器模块地址2 + 传感器数据长度2 +数据内容2  + …… +  传感器类别n + 传感器类型n + 传感器名称n + 传感器模块地址n  + 传感器数据长度n + 数据内容n  + 校验码 + 停止位*

